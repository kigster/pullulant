#!/usr/bin/env bash

function zsh {
  #run 'sh -c "$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)"'
  oh-my-zsh-installer
  [[ -n "$(echo $SHELL | grep zsh)" ]] || run "chsh -s $(which zsh)"
  run "sed -i 's/ZSH_THEME=\".*\"/ZSH_THEME=\"${var_zsh_theme}\"/g' ~/.zshrc"
  [[ -n "$(grep shell-aliases ~/.zshrc)" ]] || echo "source ~/.shell-aliases" >> ~/.zshrc
  [[ -n "$(grep 'rbenv init' ~/.zshrc)" ]]  || echo 'eval "$(rbenv init -)"' >> ~/.zshrc

}

function oh-my-zsh-installer {
  [[ -z "$(grep -e /zsh$ /etc/shells)" ]] && brew_install "zsh"
  [[ -z "$ZSH" ]]                         && ZSH=${HOME}/.oh-my-zsh
  [[ -z "$(which git)" ]]                 && brew_install "git"
  if [ -d "$ZSH" ]; then
    run "printf \"${bldylw}Looks like your oh-my-zsh is already installed\n\""
    run "printf \"${txtrst}You'll need to remove $ZSH if you want to re-install\n\""
  else
    run "env git clone --depth=1 https://github.com/robbyrussell/oh-my-zsh.git $ZSH"
  fi
}
