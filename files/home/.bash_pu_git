#!/usr/bin/env bash
#_______________________________________________________________________________
#
# (c) 2016-2017 -2017 Konstantin Gredeskoul
# https://github.com/kigster/pullulant/
#
# MIT License
#_______________________________________________________________________________

alias 'gpnew'='git push -u origin master'
alias 'gcb'='git branch --no-color | grep -F "*" | cut -f 2 -d " "'  # git current branch
alias 'gcmr'='git reset; git add README.md; git commit -m "Updated README"; git push '
alias 'gst'='git status'
alias 'gpr'='git pull --rebase'
alias 'gprs'='git stash && git pull --rebase && git stash pop'
alias 'gs'='git status'
alias 'gc'='git co'
alias 'gd'='git diff'
alias 'gm'='git commit -m'
alias 'gl'='git log'
alias 'gpp'='git pull && git push'
alias 'ga'='git add'
alias 'gaa'='git add -A'
alias 'gap'='git add -p'
alias 'gpp'='git pull --rebase && git push'

function git::upstream() {
  local this_branch=$(gcb)
  this_branch=${this_branch:-master}
  git branch --set-upstream-to=origin/${this_branch} ${this_branch}
}

alias gcl='git::clone'

function git::clone() {
  repo=$1
  who=${2:-$USER}
  [[ "$who" == "kig" ]] && who="kigster"
  [[ -z "$repo" ]] && {
    printf "${bldred}Usage: gcl repo [github-username]${txtrst}\n"
    return
  }
  git clone git@github.com:$who/$repo
}
